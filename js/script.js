"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// nav.js
var clickEventType = window.ontouchstart !== null ? 'click' : 'touchstart';
var clickFlag = true; // ナビメニュー

var navMenu = function navMenu() {
  $('.menu').on(clickEventType, function () {
    if (clickFlag) {
      clickFlag = false;
      $('nav').addClass('z-index');
      var openFlag = $('.menu__text').text();

      if (openFlag == 'MENU') {
        $('.menu__text').text('CLOSE');
        $('nav').addClass('open');
        setTimeout(function () {
          $('.nav-list').addClass('show');
          setTimeout(function () {
            clickFlag = true;
          }, 1000);
        }, 300);
      } else {
        $('.nav-list').addClass('hide');
        setTimeout(function () {
          $('nav').removeClass('open');
          $('.nav-list').removeClass('show');
          $('.menu__text').text('MENU');
          setTimeout(function () {
            $('.nav-list').removeClass('hide');
            $('nav').removeClass('z-index');
            clickFlag = true;
          }, 900);
        }, 300);
      }

      return false;
    } else {
      return false;
    }
  });
};

$('.menu').on(clickEventType, navMenu()); // scroll.js

var ScrollFade = function ScrollFade() {
  var _this2 = this;

  _classCallCheck(this, ScrollFade);

  this.ANIMATION_CLASS = 'is-animation';
  var $section = document.querySelectorAll('.js-scroll-fade:not(.is-animation), .js-scroll-slide:not(.is-animation), .js-scroll-slide-bg:not(.is-animation)');

  if ($section.length === null) {
    return;
  }

  var controller = new ScrollMagic.Controller();

  var _loop = function _loop(i) {
    var scene = new ScrollMagic.Scene({
      triggerElement: $section[i],
      triggerHook: 0.9,
      reverse: false,
      offset: 100
    }) //.addIndicators({name: 'fade-in'})
    .addTo(controller);
    scene.on('enter', function () {
      $section[i].classList.add(_this2.ANIMATION_CLASS);
      $('.posts__item').eq(i).find('.js-scroll-slide').on('transitionend webkitTransitionEnd', function () {
        $('.posts__item').eq(i).find('.wrap-slide').addClass('shadow');
        $('.posts__item').eq(i).find('.info').addClass('is-animation');
      });
    });
    scene.on('end', function () {
      scene.destroy(true);
    });
  };

  for (var i = 0; i < $section.length; i++) {
    _loop(i);
  }
};

new ScrollFade();
var $postsItem = document.querySelectorAll('.posts__item');
var controller2 = new ScrollMagic.Controller();
var animateElem = document.getElementById("heading");

var _loop2 = function _loop2(i2) {
  var scene2 = new ScrollMagic.Scene({
    triggerElement: $postsItem[i2],
    triggerHook: 0.9,
    reverse: true,
    offset: 100
  }) //.addIndicators( {name: "item"})
  .addTo(controller2);
  scene2.on('enter', function () {
    $('.posts__item').eq(i2).find('.eyecatch img').attr('src');
    var attrSrc = $('.posts__item').eq(i2).find('.eyecatch img').attr('src');
    var imgBgSrc = 'url(' + attrSrc + ')';
    $('#heading').addClass('opacity').css('background-image', imgBgSrc);
  });
  scene2.on('leave', function () {
    if (i2 > 0) {
      $('.posts__item').eq(i2 - 1).find('.eyecatch img').attr('src');
      var attrSrc = $('.posts__item').eq(i2 - 1).find('.eyecatch img').attr('src');
      var imgBgSrc = 'url(' + attrSrc + ')'; //console.log(imgBgSrc);

      $('#heading').css('background-image', imgBgSrc);
    }
  });
};

for (var i2 = 0; i2 < $postsItem.length; i2++) {
  _loop2(i2);
} // 3点リーダー


var dottedLine = function dottedLine() {
  $(window).on('load', function () {
    $('.info__excerpt').addClass('dotted-line');
  });
};

dottedLine();

var scrollEvent = function scrollEvent() {
  // トップの時ロゴ表示
  //console.log(32132);
  if ($('.scroll-articles').length) {
    $(window).on('load resize scroll', function () {
      var scTop = $(window).scrollTop();
      var headingHeight = $('#heading').innerHeight();
      var tgtTop = $('.posts__item').eq(0).offset().top; //console.log('s:' + scTop);
      //console.log('h:' + headingHeight);
      //console.log('t:' + tgtTop);
      //console.log(headingHeight);
      //console.log(tgtTop);

      if (tgtTop - headingHeight < scTop) {
        //console.log('消す');
        // $('#heading .text').animate({
        //   opacity: 0,
        // });
        $('#heading .text').addClass('opacity');
      } else {
        $('#heading .text').removeAttr('style');
        $('#heading .text').removeClass('opacity');
      }
    });
    var scTop2 = $(window).scrollTop();

    if (scTop2 == 0) {
      $('#heading .text').removeAttr('style'); //$('#heading .text').addClass('first-animation');
    } else {
      var termsFlag = $('#heading .text').hasClass('terms');

      if (termsFlag) {
        $('#heading .text').removeAttr('style'); //$('#heading .text').addClass('first-animation');
      }
    }
  }
};

var singleScrollEvent = function singleScrollEvent() {
  if ($('#single').length) {
    var path = location.pathname,
        articleNum,
        imgBgSrc;
    articleNum = path.split('/')[2];
    imgBgSrc = 'url(/images/posts/' + articleNum + '/eyecatch.jpg)';
    $('.single-heading').css('background-image', imgBgSrc);
    $('.single-heading').addClass('fade-in');
    $(window).on('scroll', function () {
      var pos = $('.article-heading .time-category').offset().top;
      var scroll = $(window).scrollTop();
      var windowHeight = $(window).height(); //console.log('scroll:' + scroll);
      //console.log('pos:' + pos);
      //console.log('height:' + windowHeight);

      if (scroll > pos) {
        $('.single-heading').addClass('fade-out');
        $('.article-heading').addClass('fade-out');
        $('#single').addClass('fade-up');
        $('.single-heading').css('background-image', imgBgSrc);
      } else {
        $('.single-heading').removeClass('fade-out');
        $('.article-heading').removeClass('fade-out');
        $('#single').removeClass('fade-up');
        $('.single-heading').css('background-image', imgBgSrc);
      }
    });
  }
}; // aタグ連打防止


var double = function double() {
  $('a').click(function () {
    $(this).click(function () {
      return false;
    });
  });
};

double(); // ローディング非表示

var loading = function loading() {
  $(window).on('load', function () {
    $('.layer').delay(200).fadeOut(400);
  });
};

loading();
$(function () {
  setTimeout('stopLoad()', 1200);
});

var stopLoad = function stopLoad() {
  $('.layer').delay(200).fadeOut(400);
};

$(window).on('load resize scroll', scrollEvent());
$(window).on('scroll', singleScrollEvent());
Barba.Pjax.start();
Barba.Dispatcher.on('newPageReady', function (currentStatus, oldStatus, container, newPageRawHTML) {
  //console.log(131);
  history.scrollRestoration = 'manual';
  var top = ($('header .text').offset() || {
    "top": NaN
  }).top;
  var top2 = ($('.article-heading .time-category').offset() || {
    "top": NaN
  }).top;
  return false;
}); //console.log('performance'+performance.navigation.type);
// トップなどの記事一覧部分

var Top = Barba.BaseView.extend({
  namespace: 'top',
  onEnterCompleted: function onEnterCompleted() {
    // ローディング非表示
    var loading = function loading() {
      $(window).on('load', function () {
        $('.layer').delay(200).fadeOut(400);
      });
    };

    loading();
    $(function () {
      setTimeout('stopLoad()', 1200);
    });

    var stopLoad = function stopLoad() {
      $('.layer').delay(200).fadeOut(400);
    };

    $(window).off('scroll', singleScrollEvent());
    $('.menu').on(clickEventType, navMenu());
    new ScrollFade();
    var $postsItem = document.querySelectorAll('.posts__item');
    var controller2 = new ScrollMagic.Controller();
    var animateElem = document.getElementById("heading");

    var _loop3 = function _loop3(i2) {
      var scene2 = new ScrollMagic.Scene({
        triggerElement: $postsItem[i2],
        triggerHook: 0.9,
        reverse: true,
        offset: 100
      }) //.addIndicators( {name: "item"})
      .addTo(controller2);
      scene2.on('enter', function () {
        $('.posts__item').eq(i2).find('.eyecatch img').attr('src');
        var attrSrc = $('.posts__item').eq(i2).find('.eyecatch img').attr('src');
        var imgBgSrc = 'url(' + attrSrc + ')';
        $('#heading').addClass('opacity').css('background-image', imgBgSrc);
      });
      scene2.on('leave', function () {
        if (i2 > 0) {
          $('.posts__item').eq(i2 - 1).find('.eyecatch img').attr('src');
          var attrSrc = $('.posts__item').eq(i2 - 1).find('.eyecatch img').attr('src');
          var imgBgSrc = 'url(' + attrSrc + ')'; //console.log(imgBgSrc);

          $('#heading').css('background-image', imgBgSrc);
        }
      });
    };

    for (var i2 = 0; i2 < $postsItem.length; i2++) {
      _loop3(i2);
    } // トップの時ロゴ表示


    if ($('.scroll-articles').length) {
      $(window).on('load resize scroll', function () {
        var scTop = $(window).scrollTop();
        var headingHeight = $('#heading').innerHeight();
        var tgtTop = $('.posts__item').eq(0).offset().top; //console.log('s:' + scTop);
        //console.log('h:' + headingHeight);
        //console.log('t:' + tgtTop);

        if (tgtTop - headingHeight < scTop) {
          //console.log('消す');
          $('#heading .text').addClass('opacity');
        } else {
          $('#heading .text').removeAttr('style');
          $('#heading .text').removeClass('opacity');
        }
      });
      var scTop2 = $(window).scrollTop();

      if (scTop2 == 0) {
        $('#heading .text').removeAttr('style'); //$('#heading .text').addClass('first-animation');
      } else {
        var termsFlag = $('#heading .text').hasClass('terms');

        if (termsFlag) {
          $('#heading .text').removeAttr('style'); //$('#heading .text').addClass('first-animation');
        }
      }
    } // 3点リーダー


    $('.info__excerpt').addClass('dotted-line'); // aタグ連打防止

    $('a').click(function () {
      $(this).click(function () {
        return false;
      });
    });
  }
}); // 記事ページ

var Single = Barba.BaseView.extend({
  namespace: 'single',
  onEnterCompleted: function onEnterCompleted() {
    // ローディング非表示
    var loading = function loading() {
      $(window).on('load', function () {
        $('.layer').delay(200).fadeOut(400);
      });
    };

    loading();
    $(function () {
      setTimeout('stopLoad()', 1200);
    });

    var stopLoad = function stopLoad() {
      $('.layer').delay(200).fadeOut(400);
    };

    $(window).off('load resize scroll', scrollEvent());
    $('.menu').on(clickEventType, navMenu());

    if ($('#single').length) {
      var path = location.pathname,
          articleNum,
          imgBgSrc;
      articleNum = path.split('/')[2];
      imgBgSrc = 'url(/images/posts/' + articleNum + '/eyecatch.jpg)';
      $('.single-heading').css('background-image', imgBgSrc);
      setTimeout(function () {
        $('.single-heading').addClass('fade-in');
      }, 150); //$('.single-heading').addClass('fade-in');

      $(window).on('scroll', function () {
        var pos = $('.article-heading .time-category').offset().top;
        var scroll = $(window).scrollTop();
        var windowHeight = $(window).height(); //console.log('scroll:' + scroll);
        //console.log('pos:' + pos);
        //console.log('height:' + windowHeight);

        if (scroll > pos) {
          $('.single-heading').addClass('fade-out');
          $('.article-heading').addClass('fade-out');
          $('#single').addClass('fade-up');
          $('.single-heading').css('background-image', imgBgSrc);
        } else {
          $('.single-heading').removeClass('fade-out');
          $('.article-heading').removeClass('fade-out');
          $('#single').removeClass('fade-up');
          $('.single-heading').css('background-image', imgBgSrc);
        }
      });
    } // aタグ連打防止


    $('a').click(function () {
      $(this).click(function () {
        return false;
      });
    }); // 外部リンクタブで開く
    //$("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
  }
}); // カテゴリなどの一覧

var Terms = Barba.BaseView.extend({
  namespace: 'terms',
  onEnterCompleted: function onEnterCompleted() {
    //console.log('termsへ');
    // ローディング非表示
    var loading = function loading() {
      $(window).on('load', function () {
        $('.layer').delay(200).fadeOut(400);
      });
    };

    loading();
    $(function () {
      setTimeout('stopLoad()', 1200);
    });

    var stopLoad = function stopLoad() {
      $('.layer').delay(200).fadeOut(400);
    };

    $(window).off('load resize scroll', scrollEvent());
    $(window).off('scroll', singleScrollEvent());
    $('.menu').on(clickEventType, navMenu()); // aタグ連打防止

    $('a').click(function () {
      $(this).click(function () {
        return false;
      });
    });
  }
});
Top.init();
Single.init();
Terms.init(); // 画面遷移のアニメーション

Barba.Prefetch.init();
var FadeTransition = Barba.BaseTransition.extend({
  start: function start() {
    Promise.all([this.newContainerLoading, this.fadeOut()]).then(this.fadeIn.bind(this));
  },
  fadeOut: function fadeOut() {
    return $(this.oldContainer).animate({
      opacity: 0
    }).promise();
  },
  fadeIn: function fadeIn() {
    $('.single-heading').css('background-image', 'none');
    $(window).scrollTop(0);

    var _this = this;

    var $el = $(this.newContainer);
    $(this.oldContainer).hide();
    $el.css({
      visibility: 'visible',
      opacity: 0
    });
    $el.animate({
      opacity: 1
    }, 400, function () {
      _this.done();
    });
  }
});

Barba.Pjax.getTransition = function () {
  return FadeTransition;
}; // 外部リンクタブで開く
//$("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjbGlja0V2ZW50VHlwZSIsIndpbmRvdyIsIm9udG91Y2hzdGFydCIsImNsaWNrRmxhZyIsIm5hdk1lbnUiLCIkIiwib24iLCJhZGRDbGFzcyIsIm9wZW5GbGFnIiwidGV4dCIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsIlNjcm9sbEZhZGUiLCJBTklNQVRJT05fQ0xBU1MiLCIkc2VjdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImNvbnRyb2xsZXIiLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJpIiwic2NlbmUiLCJTY2VuZSIsInRyaWdnZXJFbGVtZW50IiwidHJpZ2dlckhvb2siLCJyZXZlcnNlIiwib2Zmc2V0IiwiYWRkVG8iLCJjbGFzc0xpc3QiLCJhZGQiLCJlcSIsImZpbmQiLCJkZXN0cm95IiwiJHBvc3RzSXRlbSIsImNvbnRyb2xsZXIyIiwiYW5pbWF0ZUVsZW0iLCJnZXRFbGVtZW50QnlJZCIsImkyIiwic2NlbmUyIiwiYXR0ciIsImF0dHJTcmMiLCJpbWdCZ1NyYyIsImNzcyIsImRvdHRlZExpbmUiLCJzY3JvbGxFdmVudCIsInNjVG9wIiwic2Nyb2xsVG9wIiwiaGVhZGluZ0hlaWdodCIsImlubmVySGVpZ2h0IiwidGd0VG9wIiwidG9wIiwicmVtb3ZlQXR0ciIsInNjVG9wMiIsInRlcm1zRmxhZyIsImhhc0NsYXNzIiwic2luZ2xlU2Nyb2xsRXZlbnQiLCJwYXRoIiwibG9jYXRpb24iLCJwYXRobmFtZSIsImFydGljbGVOdW0iLCJzcGxpdCIsInBvcyIsInNjcm9sbCIsIndpbmRvd0hlaWdodCIsImhlaWdodCIsImRvdWJsZSIsImNsaWNrIiwibG9hZGluZyIsImRlbGF5IiwiZmFkZU91dCIsInN0b3BMb2FkIiwiQmFyYmEiLCJQamF4Iiwic3RhcnQiLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsImNvbnRhaW5lciIsIm5ld1BhZ2VSYXdIVE1MIiwiaGlzdG9yeSIsInNjcm9sbFJlc3RvcmF0aW9uIiwiTmFOIiwidG9wMiIsIlRvcCIsIkJhc2VWaWV3IiwiZXh0ZW5kIiwibmFtZXNwYWNlIiwib25FbnRlckNvbXBsZXRlZCIsIm9mZiIsIlNpbmdsZSIsIlRlcm1zIiwiaW5pdCIsIlByZWZldGNoIiwiRmFkZVRyYW5zaXRpb24iLCJCYXNlVHJhbnNpdGlvbiIsIlByb21pc2UiLCJhbGwiLCJuZXdDb250YWluZXJMb2FkaW5nIiwidGhlbiIsImZhZGVJbiIsImJpbmQiLCJvbGRDb250YWluZXIiLCJhbmltYXRlIiwib3BhY2l0eSIsInByb21pc2UiLCJfdGhpcyIsIiRlbCIsIm5ld0NvbnRhaW5lciIsImhpZGUiLCJ2aXNpYmlsaXR5IiwiZG9uZSIsImdldFRyYW5zaXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLElBQUlBLGNBQWMsR0FBS0MsTUFBTSxDQUFDQyxZQUFQLEtBQXNCLElBQXZCLEdBQTZCLE9BQTdCLEdBQXFDLFlBQTNEO0FBQ0EsSUFBSUMsU0FBUyxHQUFHLElBQWhCLEMsQ0FFQTs7QUFDQSxJQUFNQyxPQUFPLEdBQUcsU0FBVkEsT0FBVSxHQUFNO0FBQ3BCQyxFQUFBQSxDQUFDLENBQUMsT0FBRCxDQUFELENBQVdDLEVBQVgsQ0FBY04sY0FBZCxFQUE4QixZQUFZO0FBQ3hDLFFBQUlHLFNBQUosRUFBZTtBQUNiQSxNQUFBQSxTQUFTLEdBQUcsS0FBWjtBQUNBRSxNQUFBQSxDQUFDLENBQUMsS0FBRCxDQUFELENBQVNFLFFBQVQsQ0FBa0IsU0FBbEI7QUFDQSxVQUFJQyxRQUFRLEdBQUdILENBQUMsQ0FBQyxhQUFELENBQUQsQ0FBaUJJLElBQWpCLEVBQWY7O0FBQ0EsVUFBSUQsUUFBUSxJQUFJLE1BQWhCLEVBQXdCO0FBQ3RCSCxRQUFBQSxDQUFDLENBQUMsYUFBRCxDQUFELENBQWlCSSxJQUFqQixDQUFzQixPQUF0QjtBQUNBSixRQUFBQSxDQUFDLENBQUMsS0FBRCxDQUFELENBQVNFLFFBQVQs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QUE3QixFQUE2Q0MsT0FBN0MsRUFBUDtBQUNELEdBVjhDO0FBWS9DTCxFQUFBQSxNQUFNLEVBQUUsa0JBQVc7QUFDakIvRixJQUFBQSxDQUFDLENBQUMsaUJBQUQsQ0FBRCxDQUFxQnNDLEdBQXJCLENBQXlCLGtCQUF6QixFQUE2QyxNQUE3QztBQUNBdEMsSUFBQUEsQ0FBQyxDQUFDSixNQUFELENBQUQsQ0FBVThDLFNBQVYsQ0FBb0IsQ0FBcEI7O0FBRUEsUUFBSTJELEtBQUssR0FBRyxJQUFaOztBQUNBLFFBQUlDLEdBQUcsR0FBR3RHLENBQUMsQ0FBQyxLQUFLdUcsWUFBTixDQUFYO0FBRUF2RyxJQUFBQSxDQUFDLENBQUMsS0FBS2lHLFlBQU4sQ0FBRCxDQUFxQk8sSUFBckI7QUFFQUYsSUFBQUEsR0FBRyxDQUFDaEUsR0FBSixDQUFRO0FBQ05tRSxNQUFBQSxVQUFVLEVBQUcsU0FEUDtBQUVOTixNQUFBQSxPQUFPLEVBQUc7QUFGSixLQUFSO0FBS0FHLElBQUFBLEdBQUcsQ0FBQ0osT0FBSixDQUFZO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQVosRUFBNEIsR0FBNUIsRUFBaUMsWUFBVztBQUMxQ0UsTUFBQUEsS0FBSyxDQUFDSyxJQUFOO0FBQ0QsS0FGRDtBQUdEO0FBN0I4QyxDQUE1QixDQUFyQjs7QUFnQ0F2QyxLQUFLLENBQUNDLElBQU4sQ0FBV3VDLGFBQVgsR0FBMkIsWUFBVztBQUNwQyxTQUFPbEIsY0FBUDtBQUNELENBRkQsQyxDQUlBO0FBQ0EiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmF2LmpzXG5sZXQgY2xpY2tFdmVudFR5cGUgPSAoKHdpbmRvdy5vbnRvdWNoc3RhcnQhPT1udWxsKT8nY2xpY2snOid0b3VjaHN0YXJ0Jyk7XG5sZXQgY2xpY2tGbGFnID0gdHJ1ZTtcblxuLy8g44OK44OT44Oh44OL44Ol44O8XG5jb25zdCBuYXZNZW51ID0gKCkgPT4ge1xuICAkKCcubWVudScpLm9uKGNsaWNrRXZlbnRUeXBlLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNsaWNrRmxhZykge1xuICAgICAgY2xpY2tGbGFnID0gZmFsc2U7XG4gICAgICAkKCduYXYnKS5hZGRDbGFzcygnei1pbmRleCcpO1xuICAgICAgbGV0IG9wZW5GbGFnID0gJCgnLm1lbnVfX3RleHQnKS50ZXh0KCk7XG4gICAgICBpZiAob3BlbkZsYWcgPT0gJ01FTlUnKSB7XG4gICAgICAgICQoJy5tZW51X190ZXh0JykudGV4dCgnQ0xPU0UnKTtcbiAgICAgICAgJCgnbmF2JykuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCgnLm5hdi1saXN0JykuYWRkQ2xhc3MoJ3Nob3cnKTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xpY2tGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5uYXYtbGlzdCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJ25hdicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgJCgnLm5hdi1saXN0JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAkKCcubWVudV9fdGV4dCcpLnRleHQoJ01FTlUnKTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLm5hdi1saXN0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICQoJ25hdicpLnJlbW92ZUNsYXNzKCd6LWluZGV4Jyk7XG4gICAgICAgICAgICBjbGlja0ZsYWcgPSB0cnVlO1xuICAgICAgICAgIH0sIDkwMCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59XG5cbiQoJy5tZW51Jykub24oY2xpY2tFdmVudFR5cGUsIG5hdk1lbnUoKSk7XG5cbi8vIHNjcm9sbC5qc1xuY2xhc3MgU2Nyb2xsRmFkZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuQU5JTUFUSU9OX0NMQVNTID0gJ2lzLWFuaW1hdGlvbic7XG5cbiAgICBsZXQgJHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtc2Nyb2xsLWZhZGU6bm90KC5pcy1hbmltYXRpb24pLCAuanMtc2Nyb2xsLXNsaWRlOm5vdCguaXMtYW5pbWF0aW9uKSwgLmpzLXNjcm9sbC1zbGlkZS1iZzpub3QoLmlzLWFuaW1hdGlvbiknKTtcbiAgICBpZigkc2VjdGlvbi5sZW5ndGggPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAkc2VjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICAgICAgdHJpZ2dlckVsZW1lbnQ6ICRzZWN0aW9uW2ldLFxuICAgICAgICB0cmlnZ2VySG9vazogMC45LFxuICAgICAgICByZXZlcnNlOiBmYWxzZSxcbiAgICAgICAgb2Zmc2V0OiAxMDBcbiAgICAgIH0pXG4gICAgICAvLy5hZGRJbmRpY2F0b3JzKHtuYW1lOiAnZmFkZS1pbid9KVxuICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XG4gICAgICBzY2VuZS5vbignZW50ZXInLCAoKT0+e1xuICAgICAgICAkc2VjdGlvbltpXS5jbGFzc0xpc3QuYWRkKHRoaXMuQU5JTUFUSU9OX0NMQVNTKTtcbiAgICAgICAgJCgnLnBvc3RzX19pdGVtJykuZXEoaSkuZmluZCgnLmpzLXNjcm9sbC1zbGlkZScpLm9uKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKCcucG9zdHNfX2l0ZW0nKS5lcShpKS5maW5kKCcud3JhcC1zbGlkZScpLmFkZENsYXNzKCdzaGFkb3cnKTtcbiAgICAgICAgICAkKCcucG9zdHNfX2l0ZW0nKS5lcShpKS5maW5kKCcuaW5mbycpLmFkZENsYXNzKCdpcy1hbmltYXRpb24nKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHNjZW5lLm9uKCdlbmQnLCAoKT0+e1xuICAgICAgICBzY2VuZS5kZXN0cm95KHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgfVxufVxuXG5uZXcgU2Nyb2xsRmFkZSgpO1xuXG5cbmxldCAkcG9zdHNJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvc3RzX19pdGVtJyk7XG5sZXQgY29udHJvbGxlcjIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xubGV0IGFuaW1hdGVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkaW5nXCIpO1xuZm9yKGxldCBpMiA9IDA7IGkyIDwgJHBvc3RzSXRlbS5sZW5ndGg7IGkyKyspIHtcbiAgbGV0IHNjZW5lMiA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgdHJpZ2dlckVsZW1lbnQ6ICRwb3N0c0l0ZW1baTJdLFxuICAgIHRyaWdnZXJIb29rOiAwLjksXG4gICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICBvZmZzZXQ6IDEwMFxuICB9KVxuICAvLy5hZGRJbmRpY2F0b3JzKCB7bmFtZTogXCJpdGVtXCJ9KVxuICAgIC5hZGRUbyhjb250cm9sbGVyMik7XG4gIHNjZW5lMi5vbignZW50ZXInLCAoKT0+e1xuICAgICQoJy5wb3N0c19faXRlbScpLmVxKGkyKS5maW5kKCcuZXllY2F0Y2ggaW1nJykuYXR0cignc3JjJyk7XG4gICAgbGV0IGF0dHJTcmMgPSAkKCcucG9zdHNfX2l0ZW0nKS5lcShpMikuZmluZCgnLmV5ZWNhdGNoIGltZycpLmF0dHIoJ3NyYycpO1xuICAgIGxldCBpbWdCZ1NyYyA9ICd1cmwoJyArIGF0dHJTcmMgKyAnKSc7XG5cbiAgICAkKCcjaGVhZGluZycpLmFkZENsYXNzKCdvcGFjaXR5JykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgaW1nQmdTcmMpO1xuICB9KTtcbiAgc2NlbmUyLm9uKCdsZWF2ZScsICgpPT57XG4gICAgaWYoaTIgPiAwKSB7XG4gICAgICAkKCcucG9zdHNfX2l0ZW0nKS5lcShpMi0xKS5maW5kKCcuZXllY2F0Y2ggaW1nJykuYXR0cignc3JjJyk7XG4gICAgICBsZXQgYXR0clNyYyA9ICQoJy5wb3N0c19faXRlbScpLmVxKGkyLTEpLmZpbmQoJy5leWVjYXRjaCBpbWcnKS5hdHRyKCdzcmMnKTtcbiAgICAgIGxldCBpbWdCZ1NyYyA9ICd1cmwoJyArIGF0dHJTcmMgKyAnKSc7XG4gICAgICAvL2NvbnNvbGUubG9nKGltZ0JnU3JjKTtcbiAgICAgICQoJyNoZWFkaW5nJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgaW1nQmdTcmMpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIDPngrnjg6rjg7zjg4Djg7xcbmNvbnN0IGRvdHRlZExpbmUgPSAoKSA9PiB7XG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICQoJy5pbmZvX19leGNlcnB0JykuYWRkQ2xhc3MoJ2RvdHRlZC1saW5lJyk7XG4gIH0pXG59XG5cbmRvdHRlZExpbmUoKTtcblxuY29uc3Qgc2Nyb2xsRXZlbnQgPSAoKSA9PiB7XG4gIC8vIOODiOODg+ODl+OBruaZguODreOCtOihqOekulxuLy9jb25zb2xlLmxvZygzMjEzMik7XG4gIGlmKCQoJy5zY3JvbGwtYXJ0aWNsZXMnKS5sZW5ndGgpIHtcbiAgICAkKHdpbmRvdykub24oJ2xvYWQgcmVzaXplIHNjcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBzY1RvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgIGxldCBoZWFkaW5nSGVpZ2h0ID0gJCgnI2hlYWRpbmcnKS5pbm5lckhlaWdodCgpO1xuICAgICAgbGV0IHRndFRvcCA9ICQoJy5wb3N0c19faXRlbScpLmVxKDApLm9mZnNldCgpLnRvcDtcbiAgICAgIC8vY29uc29sZS5sb2coJ3M6JyArIHNjVG9wKTtcbiAgICAgIC8vY29uc29sZS5sb2coJ2g6JyArIGhlYWRpbmdIZWlnaHQpO1xuICAgICAgLy9jb25zb2xlLmxvZygndDonICsgdGd0VG9wKTtcbiAgICAgIC8vY29uc29sZS5sb2coaGVhZGluZ0hlaWdodCk7XG4gICAgICAvL2NvbnNvbGUubG9nKHRndFRvcCk7XG5cbiAgICAgIGlmICh0Z3RUb3AgLSBoZWFkaW5nSGVpZ2h0IDwgc2NUb3ApIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygn5raI44GZJyk7XG4gICAgICAgIC8vICQoJyNoZWFkaW5nIC50ZXh0JykuYW5pbWF0ZSh7XG4gICAgICAgIC8vICAgb3BhY2l0eTogMCxcbiAgICAgICAgLy8gfSk7XG4gICAgICAgICQoJyNoZWFkaW5nIC50ZXh0JykuYWRkQ2xhc3MoJ29wYWNpdHknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJyNoZWFkaW5nIC50ZXh0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgJCgnI2hlYWRpbmcgLnRleHQnKS5yZW1vdmVDbGFzcygnb3BhY2l0eScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHNjVG9wMiA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICBpZiAoc2NUb3AyID09IDApIHtcbiAgICAgICQoJyNoZWFkaW5nIC50ZXh0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIC8vJCgnI2hlYWRpbmcgLnRleHQnKS5hZGRDbGFzcygnZmlyc3QtYW5pbWF0aW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0ZXJtc0ZsYWcgPSAkKCcjaGVhZGluZyAudGV4dCcpLmhhc0NsYXNzKCd0ZXJtcycpO1xuICAgICAgaWYgKHRlcm1zRmxhZykge1xuICAgICAgICAkKCcjaGVhZGluZyAudGV4dCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgIC8vJCgnI2hlYWRpbmcgLnRleHQnKS5hZGRDbGFzcygnZmlyc3QtYW5pbWF0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IHNpbmdsZVNjcm9sbEV2ZW50ID0gKCkgPT4ge1xuICBpZigkKCcjc2luZ2xlJykubGVuZ3RoKSB7XG4gICAgbGV0IHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgIGFydGljbGVOdW0sXG4gICAgICBpbWdCZ1NyYztcblxuICAgIGFydGljbGVOdW0gPSBwYXRoLnNwbGl0KCcvJylbMl07XG4gICAgaW1nQmdTcmMgPSAndXJsKC9pbWFnZXMvcG9zdHMvJyArIGFydGljbGVOdW0gKyAnL2V5ZWNhdGNoLmpwZyknO1xuICAgICQoJy5zaW5nbGUtaGVhZGluZycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGltZ0JnU3JjKTtcbiAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5hZGRDbGFzcygnZmFkZS1pbicpO1xuXG4gICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgcG9zID0gJCgnLmFydGljbGUtaGVhZGluZyAudGltZS1jYXRlZ29yeScpLm9mZnNldCgpLnRvcDtcbiAgICAgIGxldCBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICBsZXQgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgLy9jb25zb2xlLmxvZygnc2Nyb2xsOicgKyBzY3JvbGwpO1xuICAgICAgLy9jb25zb2xlLmxvZygncG9zOicgKyBwb3MpO1xuICAgICAgLy9jb25zb2xlLmxvZygnaGVpZ2h0OicgKyB3aW5kb3dIZWlnaHQpO1xuXG4gICAgICBpZiAoc2Nyb2xsID4gcG9zKSB7XG4gICAgICAgICQoJy5zaW5nbGUtaGVhZGluZycpLmFkZENsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICAkKCcuYXJ0aWNsZS1oZWFkaW5nJykuYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICQoJyNzaW5nbGUnKS5hZGRDbGFzcygnZmFkZS11cCcpO1xuICAgICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBpbWdCZ1NyYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5yZW1vdmVDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgJCgnLmFydGljbGUtaGVhZGluZycpLnJlbW92ZUNsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICAkKCcjc2luZ2xlJykucmVtb3ZlQ2xhc3MoJ2ZhZGUtdXAnKTtcbiAgICAgICAgJCgnLnNpbmdsZS1oZWFkaW5nJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgaW1nQmdTcmMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8vIGHjgr/jgrDpgKPmiZPpmLLmraJcbmNvbnN0IGRvdWJsZSA9ICgpID0+IHtcbiAgJCgnYScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZG91YmxlKCk7XG5cbi8vIOODreODvOODh+OCo+ODs+OCsOmdnuihqOekulxuY29uc3QgbG9hZGluZyA9ICgpID0+IHtcbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICQoJy5sYXllcicpLmRlbGF5KDIwMCkuZmFkZU91dCg0MDApO1xuICB9KTtcbn1cblxubG9hZGluZygpO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgc2V0VGltZW91dCgnc3RvcExvYWQoKScsIDEyMDApO1xufSk7XG5cbmNvbnN0IHN0b3BMb2FkID0gKCkgPT4ge1xuICAkKCcubGF5ZXInKS5kZWxheSgyMDApLmZhZGVPdXQoNDAwKTtcbn1cblxuJCh3aW5kb3cpLm9uKCdsb2FkIHJlc2l6ZSBzY3JvbGwnLCBzY3JvbGxFdmVudCgpKTtcbiQod2luZG93KS5vbignc2Nyb2xsJywgc2luZ2xlU2Nyb2xsRXZlbnQoKSk7XG5cblxuQmFyYmEuUGpheC5zdGFydCgpO1xuXG5CYXJiYS5EaXNwYXRjaGVyLm9uKCduZXdQYWdlUmVhZHknLCBmdW5jdGlvbiggY3VycmVudFN0YXR1cywgb2xkU3RhdHVzLCBjb250YWluZXIsIG5ld1BhZ2VSYXdIVE1MICkge1xuICAvL2NvbnNvbGUubG9nKDEzMSk7XG4gIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcblxuICBsZXQgdG9wID0gKCQoJ2hlYWRlciAudGV4dCcpLm9mZnNldCgpIHx8IHsgXCJ0b3BcIjogTmFOIH0pLnRvcDtcbiAgbGV0IHRvcDIgPSAoJCgnLmFydGljbGUtaGVhZGluZyAudGltZS1jYXRlZ29yeScpLm9mZnNldCgpIHx8IHsgXCJ0b3BcIjogTmFOIH0pLnRvcDtcblxuICByZXR1cm4gZmFsc2U7XG59KTtcblxuLy9jb25zb2xlLmxvZygncGVyZm9ybWFuY2UnK3BlcmZvcm1hbmNlLm5hdmlnYXRpb24udHlwZSk7XG5cbi8vIOODiOODg+ODl+OBquOBqeOBruiomOS6i+S4gOimp+mDqOWIhlxuY29uc3QgVG9wID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgbmFtZXNwYWNlOiAndG9wJyxcbiAgb25FbnRlckNvbXBsZXRlZDogKCkgPT4ge1xuICAgIC8vIOODreODvOODh+OCo+ODs+OCsOmdnuihqOekulxuICAgIGNvbnN0IGxvYWRpbmcgPSAoKSA9PiB7XG4gICAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5sYXllcicpLmRlbGF5KDIwMCkuZmFkZU91dCg0MDApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9hZGluZygpO1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRUaW1lb3V0KCdzdG9wTG9hZCgpJywgMTIwMCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzdG9wTG9hZCA9ICgpID0+IHtcbiAgICAgICQoJy5sYXllcicpLmRlbGF5KDIwMCkuZmFkZU91dCg0MDApO1xuICAgIH1cblxuICAgICQod2luZG93KS5vZmYoJ3Njcm9sbCcsIHNpbmdsZVNjcm9sbEV2ZW50KCkpO1xuICAgICQoJy5tZW51Jykub24oY2xpY2tFdmVudFR5cGUsIG5hdk1lbnUoKSk7XG5cbiAgICBuZXcgU2Nyb2xsRmFkZSgpO1xuXG4gICAgbGV0ICRwb3N0c0l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9zdHNfX2l0ZW0nKTtcbiAgICBsZXQgY29udHJvbGxlcjIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xuICAgIGxldCBhbmltYXRlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGluZ1wiKTtcbiAgICBmb3IobGV0IGkyID0gMDsgaTIgPCAkcG9zdHNJdGVtLmxlbmd0aDsgaTIrKykge1xuICAgICAgbGV0IHNjZW5lMiA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgICAgIHRyaWdnZXJFbGVtZW50OiAkcG9zdHNJdGVtW2kyXSxcbiAgICAgICAgdHJpZ2dlckhvb2s6IDAuOSxcbiAgICAgICAgcmV2ZXJzZTogdHJ1ZSxcbiAgICAgICAgb2Zmc2V0OiAxMDBcbiAgICAgIH0pXG4gICAgICAvLy5hZGRJbmRpY2F0b3JzKCB7bmFtZTogXCJpdGVtXCJ9KVxuICAgICAgICAuYWRkVG8oY29udHJvbGxlcjIpO1xuICAgICAgc2NlbmUyLm9uKCdlbnRlcicsICgpPT57XG4gICAgICAgICQoJy5wb3N0c19faXRlbScpLmVxKGkyKS5maW5kKCcuZXllY2F0Y2ggaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgIGxldCBhdHRyU3JjID0gJCgnLnBvc3RzX19pdGVtJykuZXEoaTIpLmZpbmQoJy5leWVjYXRjaCBpbWcnKS5hdHRyKCdzcmMnKTtcbiAgICAgICAgbGV0IGltZ0JnU3JjID0gJ3VybCgnICsgYXR0clNyYyArICcpJztcblxuXG4gICAgICAgICQoJyNoZWFkaW5nJykuYWRkQ2xhc3MoJ29wYWNpdHknKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBpbWdCZ1NyYyk7XG4gICAgICB9KTtcbiAgICAgIHNjZW5lMi5vbignbGVhdmUnLCAoKT0+e1xuICAgICAgICBpZihpMiA+IDApIHtcbiAgICAgICAgICAkKCcucG9zdHNfX2l0ZW0nKS5lcShpMi0xKS5maW5kKCcuZXllY2F0Y2ggaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgICAgbGV0IGF0dHJTcmMgPSAkKCcucG9zdHNfX2l0ZW0nKS5lcShpMi0xKS5maW5kKCcuZXllY2F0Y2ggaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgICAgbGV0IGltZ0JnU3JjID0gJ3VybCgnICsgYXR0clNyYyArICcpJztcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGltZ0JnU3JjKTtcbiAgICAgICAgICAkKCcjaGVhZGluZycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGltZ0JnU3JjKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g44OI44OD44OX44Gu5pmC44Ot44K06KGo56S6XG4gICAgaWYgKCQoJy5zY3JvbGwtYXJ0aWNsZXMnKS5sZW5ndGgpIHtcbiAgICAgICQod2luZG93KS5vbignbG9hZCByZXNpemUgc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgc2NUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIGxldCBoZWFkaW5nSGVpZ2h0ID0gJCgnI2hlYWRpbmcnKS5pbm5lckhlaWdodCgpO1xuICAgICAgICBsZXQgdGd0VG9wID0gJCgnLnBvc3RzX19pdGVtJykuZXEoMCkub2Zmc2V0KCkudG9wO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdzOicgKyBzY1RvcCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2g6JyArIGhlYWRpbmdIZWlnaHQpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCd0OicgKyB0Z3RUb3ApO1xuXG4gICAgICAgIGlmICh0Z3RUb3AgLSBoZWFkaW5nSGVpZ2h0IDwgc2NUb3ApIHtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKCfmtojjgZknKTtcbiAgICAgICAgICAkKCcjaGVhZGluZyAudGV4dCcpLmFkZENsYXNzKCdvcGFjaXR5Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnI2hlYWRpbmcgLnRleHQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICQoJyNoZWFkaW5nIC50ZXh0JykucmVtb3ZlQ2xhc3MoJ29wYWNpdHknKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCBzY1RvcDIgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICBpZiAoc2NUb3AyID09IDApIHtcbiAgICAgICAgJCgnI2hlYWRpbmcgLnRleHQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAvLyQoJyNoZWFkaW5nIC50ZXh0JykuYWRkQ2xhc3MoJ2ZpcnN0LWFuaW1hdGlvbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHRlcm1zRmxhZyA9ICQoJyNoZWFkaW5nIC50ZXh0JykuaGFzQ2xhc3MoJ3Rlcm1zJyk7XG4gICAgICAgIGlmICh0ZXJtc0ZsYWcpIHtcbiAgICAgICAgICAkKCcjaGVhZGluZyAudGV4dCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgLy8kKCcjaGVhZGluZyAudGV4dCcpLmFkZENsYXNzKCdmaXJzdC1hbmltYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDPngrnjg6rjg7zjg4Djg7xcbiAgICAkKCcuaW5mb19fZXhjZXJwdCcpLmFkZENsYXNzKCdkb3R0ZWQtbGluZScpO1xuXG4gICAgLy8gYeOCv+OCsOmAo+aJk+mYsuatolxuICAgICQoJ2EnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG4vLyDoqJjkuovjg5rjg7zjgrhcbmNvbnN0IFNpbmdsZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gIG5hbWVzcGFjZTogJ3NpbmdsZScsXG4gIG9uRW50ZXJDb21wbGV0ZWQ6ICgpID0+IHtcbiAgICAvLyDjg63jg7zjg4fjgqPjg7PjgrDpnZ7ooajnpLpcbiAgICBjb25zdCBsb2FkaW5nID0gKCkgPT4ge1xuICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcubGF5ZXInKS5kZWxheSgyMDApLmZhZGVPdXQoNDAwKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxvYWRpbmcoKTtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dCgnc3RvcExvYWQoKScsIDEyMDApO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RvcExvYWQgPSAoKSA9PiB7XG4gICAgICAkKCcubGF5ZXInKS5kZWxheSgyMDApLmZhZGVPdXQoNDAwKTtcbiAgICB9XG5cbiAgICAkKHdpbmRvdykub2ZmKCdsb2FkIHJlc2l6ZSBzY3JvbGwnLCBzY3JvbGxFdmVudCgpKTtcbiAgICAkKCcubWVudScpLm9uKGNsaWNrRXZlbnRUeXBlLCBuYXZNZW51KCkpO1xuXG4gICAgaWYoJCgnI3NpbmdsZScpLmxlbmd0aCkge1xuICAgICAgbGV0IHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgYXJ0aWNsZU51bSxcbiAgICAgICAgaW1nQmdTcmM7XG5cbiAgICAgIGFydGljbGVOdW0gPSBwYXRoLnNwbGl0KCcvJylbMl07XG4gICAgICBpbWdCZ1NyYyA9ICd1cmwoL2ltYWdlcy9wb3N0cy8nICsgYXJ0aWNsZU51bSArICcvZXllY2F0Y2guanBnKSc7XG4gICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBpbWdCZ1NyYyk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5hZGRDbGFzcygnZmFkZS1pbicpO1xuICAgICAgfSwgMTUwKTtcbiAgICAgIC8vJCgnLnNpbmdsZS1oZWFkaW5nJykuYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcblxuICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBwb3MgPSAkKCcuYXJ0aWNsZS1oZWFkaW5nIC50aW1lLWNhdGVnb3J5Jykub2Zmc2V0KCkudG9wO1xuICAgICAgICBsZXQgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICBsZXQgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdzY3JvbGw6JyArIHNjcm9sbCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3BvczonICsgcG9zKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnaGVpZ2h0OicgKyB3aW5kb3dIZWlnaHQpO1xuXG4gICAgICAgIGlmIChzY3JvbGwgPiBwb3MpIHtcbiAgICAgICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5hZGRDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgICAkKCcuYXJ0aWNsZS1oZWFkaW5nJykuYWRkQ2xhc3MoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgJCgnI3NpbmdsZScpLmFkZENsYXNzKCdmYWRlLXVwJyk7XG4gICAgICAgICAgJCgnLnNpbmdsZS1oZWFkaW5nJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgaW1nQmdTcmMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy5zaW5nbGUtaGVhZGluZycpLnJlbW92ZUNsYXNzKCdmYWRlLW91dCcpO1xuICAgICAgICAgICQoJy5hcnRpY2xlLWhlYWRpbmcnKS5yZW1vdmVDbGFzcygnZmFkZS1vdXQnKTtcbiAgICAgICAgICAkKCcjc2luZ2xlJykucmVtb3ZlQ2xhc3MoJ2ZhZGUtdXAnKTtcbiAgICAgICAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBpbWdCZ1NyYyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGHjgr/jgrDpgKPmiZPpmLLmraJcbiAgICAkKCdhJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDlpJbpg6jjg6rjg7Pjgq/jgr/jg5bjgafplovjgY9cbiAgICAvLyQoXCJhW2hyZWZePSdodHRwJ106bm90KFtocmVmKj0nXCIgKyBsb2NhdGlvbi5ob3N0bmFtZSArIFwiJ10pXCIpLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgfSxcbn0pO1xuXG4vLyDjgqvjg4bjgrTjg6rjgarjganjga7kuIDopqdcbmNvbnN0IFRlcm1zID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgbmFtZXNwYWNlOiAndGVybXMnLFxuICBvbkVudGVyQ29tcGxldGVkOiAoKSA9PiB7XG4gICAgLy9jb25zb2xlLmxvZygndGVybXPjgbgnKTtcbiAgICAvLyDjg63jg7zjg4fjgqPjg7PjgrDpnZ7ooajnpLpcbiAgICBjb25zdCBsb2FkaW5nID0gKCkgPT4ge1xuICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcubGF5ZXInKS5kZWxheSgyMDApLmZhZGVPdXQoNDAwKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxvYWRpbmcoKTtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dCgnc3RvcExvYWQoKScsIDEyMDApO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RvcExvYWQgPSAoKSA9PiB7XG4gICAgICAkKCcubGF5ZXInKS5kZWxheSgyMDApLmZhZGVPdXQoNDAwKTtcbiAgICB9XG5cbiAgICAkKHdpbmRvdykub2ZmKCdsb2FkIHJlc2l6ZSBzY3JvbGwnLCBzY3JvbGxFdmVudCgpKTtcbiAgICAkKHdpbmRvdykub2ZmKCdzY3JvbGwnLCBzaW5nbGVTY3JvbGxFdmVudCgpKTtcbiAgICAkKCcubWVudScpLm9uKGNsaWNrRXZlbnRUeXBlLCBuYXZNZW51KCkpO1xuXG4gICAgLy8gYeOCv+OCsOmAo+aJk+mYsuatolxuICAgICQoJ2EnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG5Ub3AuaW5pdCgpO1xuU2luZ2xlLmluaXQoKTtcblRlcm1zLmluaXQoKTtcblxuLy8g55S76Z2i6YG356e744Gu44Ki44OL44Oh44O844K344On44OzXG5CYXJiYS5QcmVmZXRjaC5pbml0KCk7XG5sZXQgRmFkZVRyYW5zaXRpb24gPSBCYXJiYS5CYXNlVHJhbnNpdGlvbi5leHRlbmQoe1xuICBzdGFydDogZnVuY3Rpb24oKSB7XG5cbiAgICBQcm9taXNlXG4gICAgICAuYWxsKFt0aGlzLm5ld0NvbnRhaW5lckxvYWRpbmcsIHRoaXMuZmFkZU91dCgpXSlcbiAgICAgIC50aGVuKHRoaXMuZmFkZUluLmJpbmQodGhpcykpO1xuICB9LFxuXG4gIGZhZGVPdXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKHRoaXMub2xkQ29udGFpbmVyKS5hbmltYXRlKHsgb3BhY2l0eTogMCB9KS5wcm9taXNlKCk7XG4gIH0sXG5cbiAgZmFkZUluOiBmdW5jdGlvbigpIHtcbiAgICAkKCcuc2luZ2xlLWhlYWRpbmcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAnbm9uZScpO1xuICAgICQod2luZG93KS5zY3JvbGxUb3AoMCk7XG5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciAkZWwgPSAkKHRoaXMubmV3Q29udGFpbmVyKTtcblxuICAgICQodGhpcy5vbGRDb250YWluZXIpLmhpZGUoKTtcblxuICAgICRlbC5jc3Moe1xuICAgICAgdmlzaWJpbGl0eSA6ICd2aXNpYmxlJyxcbiAgICAgIG9wYWNpdHkgOiAwXG4gICAgfSk7XG5cbiAgICAkZWwuYW5pbWF0ZSh7IG9wYWNpdHk6IDEgfSwgNDAwLCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLmRvbmUoKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbkJhcmJhLlBqYXguZ2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gRmFkZVRyYW5zaXRpb247XG59O1xuXG4vLyDlpJbpg6jjg6rjg7Pjgq/jgr/jg5bjgafplovjgY9cbi8vJChcImFbaHJlZl49J2h0dHAnXTpub3QoW2hyZWYqPSdcIiArIGxvY2F0aW9uLmhvc3RuYW1lICsgXCInXSlcIikuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpOyJdfQ==
